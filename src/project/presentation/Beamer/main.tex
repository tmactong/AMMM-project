%===============================================================
%Template for UPC-TALP based on CTU and modified to match UPC-TALP colors and style  
%The original template from Czech Technical University  % Author: Martin Malý.
% They are defined by new graphical manual - 2017.
% Share and modify as you like. Keep the name of the authors.
% It is forbidden to use the template commercially.
%===============================================================

\documentclass{beamer}
\usepackage[utf8]{inputenc}
%\usepackage{lmodern}

\usepackage{algorithm}
\usepackage{caption}
%\usepackage[linesnumbered,ruled,vlined]{algorithm2e}
\usepackage[noend]{algpseudocode}
\usepackage{comment}
\usepackage{float}
\usepackage{animate}
\usetheme{Madrid}
  \usepackage[maxbibnames=99]{biblatex}
\definecolor{cvut_navy}{HTML}{0065BD}
\definecolor{cvut_blue}{HTML}{6AADE4}
\definecolor{cvut_gray}{HTML}{156570}
\usepackage{biblatex}
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage[makeroom]{cancel}
\usepackage{threeparttable}
\usepackage[utf8]{inputenc}
%\usepackage[usenames,dvipsnames]{xcolor}
%\addbibresource{biblatex-examples.bib}
%\setbeamercolor{section in toc}{}
\setbeamercolor{section in toc}{fg=black,bg=yellow} 
\setbeamercolor{alerted text}{fg=cvut_blue}
\usepackage{tikzsymbols}
\usepackage{textcomp}
\usepackage{parskip}
\definecolor{darkblue}{rgb}{0, 0, 0.5} 
\definecolor{babyblue}{rgb}{0.54, 0.81, 0.94}
\usepackage{pgf}
\usepackage{color,soul}
%\usepackage{pythontex} 
\usepackage{tcolorbox}
\tcbuselibrary{skins}
\usepackage{minted}
\usepackage{hyperref}
\usepackage{xcolor,soul}
\definecolor{lightblue}{rgb}{.90,.95,1}
\sethlcolor{lightblue}
\renewcommand<>{\hl}[1]{\only#2{\beameroriginal{\hl}}{#1}}
\setbeamertemplate{page number in head/foot}[framenumber]
%%% attravive box over equestion
\usepackage{empheq}
\usepackage{xcolor}
\definecolor{lightgreen}{HTML}{90EE90}
\newcommand{\boxedeq}[2]{\begin{empheq}[box={\fboxsep=6pt\fbox}]{align}\label{#1}#2\end{empheq}}
\newcommand{\coloredeq}[2]{\begin{empheq}[box=\colorbox{lightgreen}]{align}\label{#1}#2\end{empheq}}
\newcommand{\highlight}[1]{%
  \colorbox{red!40}{$\displaystyle#1$}}
  
  
  \definecolor{babyblue}{rgb}{0.54, 0.81, 0.94}
\definecolor{babypink}{rgb}{0.96, 0.76, 0.76}
\definecolor{blue(ncs)}{rgb}{0.0, 0.53, 0.74}
\definecolor{pistachio}{rgb}{0.58, 0.77, 0.45}
\definecolor{darksalmon}{rgb}{0.91, 0.59, 0.48}
\definecolor{lightsalmonpink}{rgb}{1.0, 0.6, 0.6}
\definecolor{columbiablue}{rgb}{0.61, 0.87, 1.0}
\definecolor{corn}{rgb}{0.98, 0.93, 0.36}
\definecolor{jonquil}{rgb}{0.98, 0.85, 0.37}
\definecolor{bananayellow}{rgb}{1.0, 0.88, 0.21}
\newcommand{\bert}{\ensuremath{%
  \mathchoice{\includegraphics[height=2ex]{Bert-pic-removebg-preview.png}} 
    {\includegraphics[height=2ex]{Bert-pic-removebg-preview.png}}
    {\includegraphics[height=1.5ex]{Bert-pic-removebg-preview.png}}
    {\includegraphics[height=1ex]{Bert-pic-removebg-preview.png}}
}}
  
  
\useoutertheme{infolines}



\usepackage{courier}
%\usepackage{animate}  
\usepackage{expl3}
%\usepackage[listings,theorems]{tcolorbox}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  
%commands for simulating terminal in/output  
%\scroll[<line separator string>]{<width as TeX dim>} 
%                             {<number of lines>}{terminal text line}  
%\clearbuf  %clears line buffer  
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  



\newcommand\scroll[4][§§]{
  \seq_set_split:Nnn\g_inputline_seq{#1}{#4}
  \seq_map_inline:Nn\g_inputline_seq{
    \seq_gput_right:Nx\g_linebuffer_seq{##1}
    \int_compare:nT{\seq_count:N\g_linebuffer_seq>#3}{
      \seq_gpop_left:NN\g_linebuffer_seq\dummy
    }
  }
  \fbox{\begin{minipage}[t][#3\baselineskip]{#2}
    \ttfamily
    \seq_map_inline:Nn\g_linebuffer_seq{\mbox{##1}\\}
  \end{minipage}}
}
\newcommand\clearbuf{\seq_gclear:N\g_linebuffer_seq}
\ExplSyntaxOff

\setbeamertemplate{headline}{%
\begin{beamercolorbox}[colsep=1.5pt]{upper separation line head}
\end{beamercolorbox}
\begin{beamercolorbox}{section in head/foot}
    \vskip2pt\insertsectionnavigationhorizontal{\paperwidth}{}{\hskip0pt plus1filll}\vskip2pt
\end{beamercolorbox}%

\begin{beamercolorbox}[colsep=1.5pt]{lower separation line head}
\end{beamercolorbox}
}
\makeatletter
\newcommand\SoulColor{%
  \let\set@color\beamerorig@set@color
  \let\reset@color\beamerorig@reset@color}
\makeatother
\SoulColor
\usepackage{amsmath, bm}
\usepackage{tikz}
\setbeamercovered{dynamic}

\newcommand{\highlightt}[1]{%
  \colorbox{blue!40}{$\displaystyle#1$}}


\newenvironment<>{problock}[1]{%
  \begin{actionenv}#2%
      \def\insertblocktitle{#1}%
      \par%
      \mode<presentation>{%
       % \setbeamercolor{block title}{fg=white,bg=orange!20!black}
        %\setbeamercolor{block title}{fg=white,bg=red!10!black}
        \setbeamercolor{block title}{fg=white,bg=cvut_blue}
       \setbeamercolor{block body}{fg=black,bg=white!50}
       \setbeamercolor{itemize item}{fg=orange!20!black}
       \setbeamertemplate{itemize item}[triangle]
     }%
      \usebeamertemplate{block begin}
    \par\usebeamertemplate{block end}
    \end{actionenv}
    }
    
    \newcommand<>{\uncovergraphics}[2][{}]{
    % Taken from: <https://tex.stackexchange.com/a/354033/95423>
    \begin{tikzpicture}
    \node[anchor=south west,inner sep=0] (B) at (4,0)
        {\includegraphics[#1]{#2}};
    \alt#3{}{%
        \fill [draw=none, fill=background, fill opacity=0.9] (B.north west) -- (B.north east) -- (B.south east) -- (B.south west) -- (B.north west) -- cycle;
    }
    \end{tikzpicture}
}




\newlength\dlf
\newcommand\alignedbox[3][yellow]{
  % #1 = color (optional, defaults to yellow)
  % #2 = before alignment
  % #3 = after alignment
  &
  \begingroup
  \settowidth\dlf{$\displaystyle #2$}
  \addtolength\dlf{\fboxsep+\fboxrule}
  \hspace{-\dlf}
  \fcolorbox{red}{#1}{$\displaystyle #2 #3$}
  \endgroup
}

\usepackage{collcell}
\usepackage{booktabs}
\usepackage{etoolbox}
%\usepackage{remreset}% tiny package containing just the \@removefromreset command
\makeatletter

\usepackage{xcoffins}
\NewCoffin\tablecoffin
\NewDocumentCommand\Vcentre{m}
  {%
    \SetHorizontalCoffin\tablecoffin{#1}%
    \TypesetCoffin\tablecoffin[l,vc]%
  }



\usepackage{pgfpages}

%% Important 
%%% show note or disable note. 
%\setbeameroption{show notes on second screen=right} % Both

\setbeamertemplate{note page}{\pagecolor{gray!5}\insertnote}\usepackage{palatino}



%\setbeamertemplate{footline}{}
%\setbeamertemplate{footline}{}
\usepackage{xcolor}
\usepackage{soul}

\usepackage{etoolbox}
\makeatletter
%\patchcmd{\slideentry}{\ifnum#2>0}{\ifnum2>0}{}{\@error{unable to patch}}% replace the subsection number test with a test that always returns true
\makeatother

\setbeamercolor*{palette primary}{bg=cvut_navy,fg=gray!20!white}
\setbeamercolor*{palette secondary}{bg=cvut_navy,fg=gray!20!white} % no color
%\setbeamercolor*{palette secondary}{bg=cvut_navy,fg=cvut_navy}
%\setbeamercolor*{palette secondary}{bg=cvut_blue,fg=white}
\setbeamercolor*{palette tertiary}{parent=palette primary} % color of the top and date
\setbeamercolor*{palette quaternary}{fg=cvut_navy,bg=gray!5!white}
\setbeamercolor*{sidebar}{fg=cvut_navy,bg=gray!15!white}
\usepackage[first=0,last=9]{lcg}
\newcommand{\ra}{\rand0.\arabic{rand}}
\usepackage{color, colortbl}
\usepackage{stackengine,tikz}
\usepackage{transparent}
\usepackage{pgfpages}
\usepackage{graphicx}
\usepackage{booktabs}% http://ctan.org/pkg/booktabs
%\setbeameroption{show notes}
\colorlet{Gray}{gray!30}




    
\newcommand*{\MinNumber}{0}%
%\newcommand*{\MaxNumber}{100}%
\newcommand*{\MaxNumber}{0.4}%
\definecolor{bubblegum}{rgb}{0.99, 0.76, 0.8}
\newcommand{\ApplyGradient}[1]{%
  \pgfmathsetmacro{\PercentColor}{100.0*(#1-\MinNumber)/(\MaxNumber-\MinNumber)}%
  %\textcolor{black!\PercentColor}{#1}
  \edef\x{\noexpand\cellcolor{babyblue!\PercentColor}}\x\textcolor{black}{#1}%
}
\newcolumntype{R}{>{\collectcell\ApplyGradient}{c}<{\endcollectcell}}

%\setbeameroption{show notes on second screen=right}
\setbeamercolor{titlelike}{parent=palette primary}
\setbeamercolor{frametitle}{parent=palette primary}

\setbeamercolor{B}{bg=red!30,fg=black}


\setbeamertemplate{section in toc}[default]
\setbeamercolor{itemize item }{fg=blue}
\setbeamertemplate{itemize item}[circle]

\setbeamercolor*{separation line}{}
\setbeamercolor*{fine separation line}{}

\setbeamertemplate{navigation symbols}{} 
\setbeamertemplate{caption}{\raggedright\insertcaption\par}

%\setbeamercolor*{block title example}{fg=blue!50,bg= blue!10}

%\setbeamercolor*{block title example}{fg=white,bg= cvut_navy}
\setbeamercolor*{block title example}{fg=white,bg=purple!75!black}
\setbeamercolor*{block body example}{fg= black, bg= white}


\setbeamercolor{itemize item}{fg=cvut_navy} % all frames will have red bullets
\setbeamercolor{block title}{bg=red!30,fg=black}
\setbeamertemplate{subsection in toc}[subsections numbered]


\usepackage{eqnarray,amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usefonttheme{professionalfonts}
\usepackage{graphicx}
\usepackage{booktabs} 
\usepackage{bm}
\usepackage{mathtools}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern} 
\usepackage{booktabs}



%\setbeamercolor{block title}{fg=darkred,bg=structure.fg!10!bg!10!bg}
%\setbeamercolor{block body}{use=block title,bg=block title.bg}
\definecolor{NormalBlue}{RGB}{200,200,255}
%\setbeamercolor{block title}{bg=NormalBlue}yellow
\setbeamercolor{block title}{fg=black, bg=yellow}
\setbeamercolor{block2}{use=structure,fg=white,bg=purple!75!black}
% definice makra
\def\bq{\mbox{\kern.1ex\protect\raisebox{-1.3ex}[0pt][0pt]{''}\kern-.1ex}}
\def\eq{\mbox{\kern-.1ex``\kern.1ex}}
\def\ifundefined#1{\expandafter\ifx\csname#1\endcsname\relax }%
\ifundefined{uv}%
        \gdef\uv#1{\bq #1\eq}
\fi

\usepackage{tcolorbox}

\tcbuselibrary{skins}


\tcbset{
    tocbox/.style={
        enhanced,
        arc=3pt,                   
        boxrule=1pt,               
        colback=white,            
        colframe=cvut_blue,        
        left=10pt, right=10pt,     
        top=5pt, bottom=5pt,       
        boxsep=0pt,                
        shadow={2pt}{-2pt}{0pt}{0.3pt}{darkshadow!10},
    }
}


\setbeamertemplate{section in toc}{
    \begin{tcolorbox}[tocbox, width=0.7\textwidth]
        \inserttocsectionnumber. \inserttocsection
    \end{tcolorbox}
    \vspace{3pt} 
}

%====================================================
%========== DEFINITION OF AUTHORS ETC...=============
%====================================================
\author[]{Xin Tong and Qiuchi Chen}
\institute[]{Universitat Politècnica de Catalunya \\
Facultat d'Informàtica de Barcelona
\vspace{2mm} \\ 
Advisors:  \\ Prof. Enric Rodriguez and Prof. Luis Velasco
\\ 
\vspace{2mm}}
\title[]{AMMM Final Project}


  \date[May 27, 2025]{\small{} \\ \small{May 27, 2025}}
%====================================================
%========== BEGINNING OF DOCUMENT ===================
%====================================================



\begin{document}



\begin{frame}[plain]
%\transboxin

	\titlepage
	\begin{center}%
	%\vspace{-2mm}
	%\tableofcontents{current}
  		\includegraphics[height=1cm]{darkblue-logo.pdf}
  		%\includegraphics[height=1cm]{darkblue-talp-logo.pdf}
  		%\includegraphics[height=1.5cm]{upclogo.pdf}
		%\includegraphics[height=1.1cm]{files/IRIS.png}
		%\includegraphics[height=1.3cm]{files/logo_iri2.png}https://www.overleaf.com/project/5bed4779c7eea31291e7e8b2#Navigation27
	%\includegraphics[height=1.3cm]{files/IBT.png}
		%\includegraphics[height=1.3cm]{files/biocev-logo-CMYK-horizontal.pdf}
	\end{center}
%\note[item]{you  note here}
\end{frame}


%\logo{\includegraphics[height=1cm]{files/TALP.png}}
%\logo{\includegraphics[height=0.6cm]{darkblue-logo.pdf}}
%\logo{\includegraphics[height=0.5cm]{darkblue-logo.pdf}}



\begin{frame}[plain]{Table of Contents}
\tableofcontents[]
\note[item]{note here }
\end{frame}



\section{Problem Identification}


\begin{frame}{Topological Sort (Kahn's algorithm)}

\begin{alertblock}

\begin{itemize}
    \item [] Cyclic graphs don't have valid topological orderings.
\end{itemize}
\end{alertblock}

\centering
\animategraphics[controls,width=1\linewidth]{2}{images/topological_sort/plot-}{001}{019}
%\animategraphics[controls,width=1\linewidth]{2}{images/topological_sort/plot-}{001}{002}
    
\end{frame}


\section{ILP Model}

\begin{frame}[plain]{ILP Model}

\begin{alertblock}
    {Decision Variables}
\centering
\scalebox{0.8}{$Priority_{ij}: \quad Binary \quad \forall i,j \in Members$}\\
\scalebox{0.8}{\hspace{0.2cm} $Order_{n}: \quad Integer \quad \forall n \in Members$}\\
\end{alertblock}

\begin{alertblock}
{Objective Function}
\centering
    
\scalebox{0.8}{$\textrm{maximize} \quad \sum_{i,j \epsilon Members} Priority_{ij} \cdot m_{ij}$}
\end{alertblock}

\begin{alertblock}
\centering
\scalebox{0.7}{\textit{Each node appears before all the nodes it points to}}
\scalebox{0.8}{\hspace{4cm} $Priority_{ij} = 1 \quad \rightarrow \quad Order_{i} < Order_{j}$}\\
\scalebox{0.8}{\hspace{4cm} $Priority_{ij} = 0 \quad \rightarrow \quad Order_{j} < Order_{i}$}
    
\end{alertblock}

\begin{alertblock}
    {Constraints}
\scalebox{0.8}{$Priority_{ij} + Priority_{ji} = 1 $}\\
\scalebox{0.8}{$\qquad\qquad\qquad\qquad\forall \quad i,j \in Members \quad \textrm{and} \quad m_{ij} + m_{ji} \neq 0$} \qquad(1)\\
\scalebox{}{}\\
\scalebox{0.8}{$Order_{i} + 1 \leq Order_{j} + (1 - Priority_{ij}) \cdot N $}\\
\scalebox{0.8}{$\qquad\qquad\qquad\qquad\forall \quad i,j \in Members \quad \textrm{and} \quad m_{ij} + m_{ji} \neq 0$}  \qquad(2)

\end{alertblock}

\end{frame}


\section{Greedy Method}


\begin{frame}{Pseudo Code \& Greedy Cost Function}

\begin{minipage}{0.9\textwidth}

\begin{alertblock}
    {Greedy Cost Function}
\scalebox{0.7}{

\begin{equation*}
q(<i,j>, S) = \begin{cases}
    -1 & if \; G(S, <i,j>) \textrm{ is not a directed acyclic graph}\\
    Bids_{ij} & if \; G(S, <i,j>) \textrm{ is a directed acyclic graph}
    \end{cases}
\end{equation*}
}
\end{alertblock}


\begin{algorithm}[H]
\renewcommand{\thealgorithm}{}
\caption{Greedy Method}
\scriptsize
\begin{algorithmic}

\State $Solution \gets \phi$
\State $Candidates \gets \{<i,j> \mid i,j \in Members \quad \textrm{and} \quad Bids_{ij} + Bids_{ji} \neq 0\}$
\While{$Candidates \neq \phi$}
    \State Evaluate $q(<i',j'>, Solution) \quad \forall <i',j'> \in Candidates$
    \State $<i,j> \gets argmax\{q(<i', j'>, Solution)\lvert <i', j'> \in Candidates \}$
    \State $Candidates \gets Candidates \setminus \{<i,j>, <j,i>\}$
    \State $Solution \gets Solution \cup \{<i,j>\}$
\EndWhile
\State \Return $Solution$

\end{algorithmic}
\end{algorithm}
\end{minipage}
    
\end{frame}

\begin{frame}{Greedy Procedure (data=project.4.dat)}

\centering
\animategraphics[controls,width=1\linewidth]{2}{images/greedy_resolution/plot-}{001}{049}
%\animategraphics[loop,controls,width=1\linewidth]{2}{images/greedy_resolution/plot-}{001}{002}
\end{frame}

\section{Local Search Method}


\begin{frame}{Local Search Method}
\begin{minipage}{1\textwidth}
\begin{alertblock}
    {Target Edges}
\scalebox{0.6}{
\begin{equation*}
\{<i,j> \mid <j,i> \in Solution \textrm{ and } Bids_{ij} > Bids_{ji} \}
\end{equation*}
}
\end{alertblock}

\vspace{-0.5em}
\begin{alertblock}
    {Neighborhood}
\scalebox{0.7}{
Solutions obtained by swapping target edges not included in the solution with their flipped counterparts}\\
\scalebox{0.7}{
that are included in the solution.
}
\end{alertblock}
\vspace{-0.5em}

\begin{alertblock}
    {Knockon Flipped Edges Cost Function}
\scalebox{0.6}{
$q(<i',j'>, edges^{flip})=$\\
}\\
\vspace{2.5mm}
\scalebox{0.6}{
\begin{equation*}
\begin{cases}
    -1 & \\
    \qquad\quad\textrm{if} \quad Bids_{i'j'} - Bids_{j'i'} + \sum_{<i'',j''> \in edges^{flip}} Bids_{i''j''} - Bids{j''i''} \geq Bids_{ij} - Bids_{ji}\\
    \qquad\quad\quad\textrm{or } edges^{residual} \mid edges^{flip} = edges^{residual} \mid edges^{flip} \cup \{<i',j'>\})\\
    \\
    \sum_{k' \in \{i',j'\}} indegree(k') + outdegree(k') & \\
    \\
    \qquad\quad\textrm{if} \quad Bids_{i'j'} - Bids_{j'i'} + \sum_{<i'',j''> \in edges^{flip}} Bids_{i''j''} - Bids{j''i''} < Bids_{ij} - Bids_{ji}\\
    \qquad\quad\quad\textrm{and } edges^{residual} \mid edges^{flip} > edges^{residual} \mid edges^{flip} \cup \{<i',j'>\}
    \end{cases}
\end{equation*}
}
\end{alertblock}

\end{minipage}
\end{frame}



\begin{frame}{Knockon Flipped Edges Selection Process}

\centering
\animategraphics[controls,width=1\linewidth]{2}{images/local_search_graph/plot-}{020}{026}
%\animategraphics[controls,width=1\linewidth]{2}{images/local_search_graph/plot-}{020}{021}
    
\end{frame}


\begin{frame}{Pseudo Code}

\begin{minipage}{\textwidth}

\begin{algorithm}[H]
\renewcommand{\thealgorithm}{}
\caption{Local Search Method}
\tiny
\begin{algorithmic}

\State $solution^{current} \gets doGreedyConstructionPhase()$
\State $improved \gets$ True
\While{$improved = $ True}
    \State $improved \gets$ False
    \For{\textbf{each} $<i,j> \in  \{<i,j> \mid <j,i> \in solution^{current} \textrm{ and } bids_{ij} > bids_{ji}\}$}
    \State $solution^{flip} \gets solution^{current}$
    \State Swap $<j,i>$ with $<i,j>$ in $solution^{flip}$
    \State $edges^{residual} \gets doTopologicalSort(solution^{flip})$
    \State $edges^{candidate}, edges^{flip}  \gets edges^{residual}, \phi$
    \While{$edges^{residual} \neq \phi$}
        \State Evaluate $q(<i',j'>, edges^{flip}) \quad \forall <i',j'> \in edges^{candidate}$
        \State $<i'',j''> \gets argmax\{q(<i',j'>, edges^{flip}) \mid <i',j'> \in edges^{candidate}\}$
        \State Swap $<i'',j''>$ with $<j'',i''>$ in $edges^{residual}$
        \State $edges^{residual} \gets doTopologicalSort(edges^{residual})$
        \State $edges^{candidate} \gets edges^{residual}$
        \State $edges^{flip} \gets edges^{flip} \cup \{<i'',j''>\}$
    \EndWhile
    \State Swap $<j',i'>$ with $<i',j'>$ in $solution^{flip} \quad \forall <i',j'> \in edges^{flip}$
    \If{$G(solution^{flip})$ is a DAG}
        \State $improved \gets$ True
        \State $solution^{current} \gets solution^{flip}$
    \EndIf
    \EndFor
\EndWhile
\State \Return $solution^{current}$

\end{algorithmic}
\end{algorithm}
\end{minipage}


\end{frame}

\begin{frame}{Local Search Procedure (data=project.4.dat)}

\centering
%\animategraphics[controls,width=1\linewidth]{2}{images/local_search_resolution/plot-}{001}{002}
\animategraphics[controls,width=1\linewidth]{2}{images/local_search_resolution/plot-}{001}{035}
    
\end{frame}


\section{GRASP Method}


\begin{frame}{Pseudo Code \& RCL}

\begin{minipage}{\textwidth}

\begin{algorithm}[H]
\renewcommand{\thealgorithm}{}
\captionsetup{font=scriptsize}
\caption{GRASP Constructive Phase}
\tiny
\begin{algorithmic}

\State $solution \gets \phi$
\State $edges^{candidate} \gets \{<i,j> \mid i,j \in Members \quad \textrm{and} \quad Bids_{ij} + Bids_{ji} \neq 0\}$
\While{$edges^{candidate} \neq \phi$}
    \State Evaluate $q(<i',j'>, solution) \quad \forall <i',j'> \in edges^{candidate}$
    \State $edges^{candidate} \gets \{<i',j'> \in edges^{candidate} \mid q(<i',j'>,solution) > 0\}$
    \State \textcolor{red}{$q^{min} \gets \textrm{min}\{q(<i',j'>,solution) \mid <i',j'> \in edges^{candidate}\}$} \Comment{RCL Procedure}
    \State \textcolor{red}{$q^{max} \gets \textrm{max}\{q(<i',j'>,solution) \mid <i',j'> \in edges^{candidate}\}$}
    \State \textcolor{red}{$\textrm{RCL}_{max} \gets \{<i',j'> \in edges^{candidate} \mid q(<i',j'>, solution) \geq q^{max} - \alpha(q^{max} - q^{min}) \}$}
    \State \textcolor{red}{$<i,j> \gets \textrm{ select} <i',j'> \in \textrm{RCL}$ at random}
    \State $edges^{candidate} \gets edges^{candidate} \setminus \{<i,j>, <j,i>\}$
    \State $solution \gets solution \cup \{<i,j>\}$
\EndWhile
\State \Return $solution$

\end{algorithmic}
\end{algorithm}

\vspace{-1.5em}

\begin{algorithm}[H]
\renewcommand{\thealgorithm}{}
\captionsetup{font=scriptsize}
\caption{GRASP Procedure}
\tiny
\begin{algorithmic}

\State $object^{best}, solution^{best} \gets 0, \phi$
\For{$retry = \textrm{1 to MaxIterations}$}
\State $obejctive, solution \gets 0, \phi$
\State $solution \gets doConstructivePhase()$
\State $solution \gets doLocalSearchPhase(solution)$
\If{$obejctive > objective^{best}$}
\State $objective^{best} \gets obejctive$
\State $solution^{best} \gets solution$
\EndIf
\EndFor
\State \Return $solution^{best}$

\end{algorithmic}    
\end{algorithm}


\end{minipage}
    
\end{frame}

\begin{frame}{GRASP Constructive Phase (data=project.4.dat,$\alpha = 0.2$)}

\centering
%\animategraphics[loop,controls,width=1\linewidth]{2}{images/grasp_resolution/plot-}{001}{002}
\animategraphics[controls,width=1\linewidth]{2}{images/grasp_resolution/plot-}{001}{034}
    
\end{frame}

\section{Experiment Result}

\begin{frame}{\bm{$\alpha$} Tuning for GRASP}
\begin{minipage}{\textwidth}

\begin{figure}[H]
\begin{tikzpicture}
\begin{axis}[
    title={Quality of Solutions (100 iter. w/o local search phase)},
    xlabel=\bm{$\alpha$},
    ylabel=\textbf{\textit{Total Income}},
    xmin=0, xmax=1,
    ymin=4000, ymax=5300,
    xtick=data,
    ytick={4000, 4100, 4200,4300,4400,4500,4600,4700,4800,4900,5000,5100,5200,5300},
    ymajorgrids=true,
    grid style=dashed,
    width=0.7\textwidth,
    legend pos=outer north east,
    legend style={nodes={scale=0.7, transform shape}}
]

\addplot table {data/grasp/45-1.dat};
\addplot table {data/grasp/45-2.dat};
\addplot table {data/grasp/45-3.dat};
\addplot table {data/grasp/45-4.dat};
\addplot table {data/grasp/45-5.dat};
\addplot table {data/grasp/45-6.dat};
\addplot table {data/grasp/45-7.dat};
\addplot table {data/grasp/45-8.dat};
\addplot table {data/grasp/45-9.dat};
\addplot table {data/grasp/45-10.dat};

\legend{data=project.45-1.dat,data=project.45-2.dat,data=project.45-3.dat,data=project.45-4.dat,data=project.45-5.dat,data=project.45-6.dat,data=project.45-7.dat,data=project.45-8.dat,data=project.45-9.dat,data=project.45-10.dat}
    
\end{axis}
\end{tikzpicture}
\captionsetup{labelformat=empty}
\end{figure}


\end{minipage}
    
\end{frame}

\begin{frame}{Solving Time}
\begin{minipage}{\textwidth}

\begin{figure}[H]

\begin{tikzpicture}[]
\begin{axis}[
    title={Solving Time (10 data with 45 members)},
    x tick label style={
        /pgf/number format/1000 sep=},
    ylabel=Solving Time ($\mathbf{s})$,
    xlabel=Data,
    ybar interval=0.8,
    xtick=data,
    bar width = 10pt,
    ymode=log,
    ymax=10000,
    bar shift=0pt,
    log origin=infty,
    legend pos=outer north east,
    width=0.7\textwidth,
    legend style={nodes={scale=0.4, transform shape}}
]


\addplot table[
    header=true,
    x=id,
    y=time
] {data/solving_time_greedy.dat};

\addplot table[
    header=true,
    x=id,
    y=time
] {data/solving_time_grasp.dat};

\addplot table[
    header=true,
    x=id,
    y=time
] {data/solving_time_ls.dat};

\addplot table[
    header=true,
    x=id,
    y=time
] {data/solving_time_grasp_with_ls.dat};


\addplot table[
    header=true,
    x=id,
    y=time
] {data/solving_time_cplex.dat};

\legend{Greedy,GRASP(100 Iter. w/o local search \bm{$\alpha$} = 0.1),Local Search,GRASP(10 Iter. w/ local search \bm{$\alpha$} = 0.1),ILP}
\end{axis}
\end{tikzpicture}
\captionsetup{labelformat=empty}
\end{figure}

\end{minipage}
    
\end{frame}

\begin{frame}{Solution Quality}

\begin{minipage}{0.9\textwidth}

\begin{figure}[H]
\begin{tikzpicture}
\begin{axis}[
    title={Quality of Solutions (10 data with 45 members)},
    xlabel=Data,
    ylabel=Total Income,
    xmin=1, xmax=10,
    ymin=4000, ymax=5300,
    xtick=data,
    ytick={4000, 4100, 4200,4300,4400,4500,4600,4700,4800,4900,5000,5100,5200,5300},
    ymajorgrids=true,
    grid style=dashed,
    width=0.8\textwidth,
    legend pos=south east,
    legend style={nodes={scale=0.8, transform shape}}
]

\addplot[green,thick,mark=triangle] table {data/objective_greedy.dat};
\addplot[blue,thick,mark=triangle] table {data/objective_grasp.dat};
\addplot[brown,thick,mark=triangle] table {data/objective_ls.dat};
\addplot[black,thick,mark=triangle] table {data/objective_grasp_with_ls.dat};
\addplot[red,thick,mark=square*] table {data/objective_cplex.dat};


\legend{Greedy,GRASP(100 Iter. w/o local search  $\alpha = 0.1$),Local Search,GRASP(10 Iter. w/ local search $\alpha = 0.1  $),ILP(Optimal)}
    
\end{axis}
\end{tikzpicture}
\captionsetup{labelformat=empty}
\end{figure}

\end{minipage}
    
\end{frame}

\begin{frame}[noframenumbering,plain]
\begin{center}
\Huge \textcolor{cvut_blue}{Thanks} 
\end{center}
\end{frame}


 \end{document}
% =============================================================
% =========================== END =============================
% =============================================================

